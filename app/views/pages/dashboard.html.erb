<div class="container">
  <div class="justify-content-center align-items-center mt-3">
    <h3 class="text-center"><strong>Choisissez TravelFlex</strong></h3>
      <div class="row rowalign-item-center justify-content-center">
        <div class="col">
          <div class="card">
            <%= image_tag 'photo-destination/argentine.jpg', class: "card-img-top" %>
            <div class="card-body">
              <p class="card-title text-center">Voyage 1</p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <%= image_tag 'photo-destination/italie.jpg', class: "card-img-top" %>
            <div class="card-body">
              <p class="card-title text-center">Voyage 2</p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <%= image_tag 'photo-destination/new-york.jpg', class: "card-img-top" %>
            <div class="card-body">
              <p class="card-title text-center">Voyage 3</p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <%= image_tag 'photo-destination/nouvelle-zelande.jpg', class: "card-img-top" %>
            <div class="card-body">
              <p class="card-title text-center">Voyage 4</p>
            </div>
          </div>
        </div>
      </div>
  </div>
<h1>Dashboard</h1>

<ul>
  <% Travel.where(user: current_user).each do |t| %>
    <li>
      <div>destination: <%= t.destination %></div>
      <div>budget: <%= t.budget %></div>
      <div>duration: <%= t.duration %></div>
      <ul>
        <% t.activities.each do |a| %>
          <li>
           <div class="card">
            <div><h4>Description:</h4> <%= a.description %></div>
            <div>title: <%= a.title %></div>
            <div>long: <%= a.long %></div>
            <div>lat: <%= a.lat %></div>
            <div>jour: <%= a.jour %></div>
            <div>localisation: <%= a.localisation %></div>
            <div>description: <%= a.description %></div>
            </div>
          </li>
        <% end %>
          <% @markers = t.activities.map do |activitie| %>
          <%{ lat: activitie.lat.to_f, lng: activitie.long.to_f } %>
          <% end %>
      </ul>
    </li>

                <div style="width: 100%; height: 500px;"
                data-controller="map"
                data-map-markers-value="<%= @markers.to_json %>"
                data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
  <% end %>
</ul>

            </div>
      </div>
    </div>
      <%= link_to 'Télécharger PDF', dashboard_pdf_path(format: :pdf), class: 'btn btn-primary', target: '_blank' %>
    </div>
  </div>
</div>
